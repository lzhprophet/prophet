var overwriteXhr=function(){function t(t,e,s){for(var n in t)try{e.call(s,t[n],n,t)}catch(o){}}function e(t,e,s){for(var n=0;n<t.length;n++)e.call(s,t[n],n)}function s(t){return"[object function]"==Object.prototype.toString.call(t).toLowerCase()}function n(){if(c)return new c;for(var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.5.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{return new ActiveXObject(t[e])}catch(s){}}var o=/^on[a-z]+$/,r=/^[A-Z]+$/,i={config:1,status:2,method:3,callback:4,constant:5},a={timeout:i.config,withCredentials:i.config,readyState:i.status,response:i.status,responseText:i.status,responseBody:i.status,responseType:i.status,responseURL:i.status,responseXML:i.status,status:i.status,statusText:i.status,abort:i.method,getAllResponseHeaders:i.method,getResponseHeader:i.method,open:i.method,send:i.method,setRequestHeader:i.method,onreadystatechange:i.callback,ontimeout:i.callback},c=window.XMLHttpRequest;return function(c){function u(){var h=n(),f=[],d=[],l={};this.xhr=h,this.constructor=u;for(var p in a)a.hasOwnProperty(p)&&(l[p]=a[p]);t(h,function(t,e){this[e]||(r.test(e)&&"undefined"!=typeof t?this[e]=i.constant:s(t)&&!o.test(e)?this[e]=i.method:o.test(e)&&null===t?this[e]=i.callback:this[e]=i.config)},l),t(l,function(t,e){t===i.config?f.push(e):t===i.status&&d.push(e)}),t(c,function(t,e){s(t)&&(this[e]=t)},this),t(l,function(t,n){try{var o=h[n]}catch(r){}if(!(void 0===o&&!n in a))switch(t){case i.constant:this[n]=o;break;case i.method:if(this[n]||("setRequestHeader"===n?this.setRequestHeader=function(t,e){return h.setRequestHeader(t,e)}:"send"===n?this.send=function(t){return h.send(t)}:"open"===n?this.open=function(t,e,s,n,o){return h.open(t,e,s,n,o)}:n in a?this[n]=function(){return h[n]()}:this[n]=function(){return h[n](arguments[0],arguments[1])}),"send"===n){var c=this.send;this.send=function(){return e(f,function(t){try{h[t]=this[t]}catch(e){}},this),c.apply(this,arguments)}}break;case i.callback:var u=this;h[n]=function(){e(d,function(t){try{u[t]=h[t]}catch(e){}}),s(u[n])&&u[n]()}}},this)}c&&(window.XMLHttpRequest=u)}}();"object"==typeof module&&"object"==typeof module.exports&&(module.exports=overwriteXhr);